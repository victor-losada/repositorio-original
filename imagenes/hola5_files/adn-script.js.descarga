!function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:function(){return h}});var n=function(t){var e,n;return null!==(e=null===(n="; ".concat(document.cookie).split("; ".concat(t,"=")).pop())||void 0===n?void 0:n.split(";").shift())&&void 0!==e?e:null},r=function(t){return new Promise((function(e,r){var o=n("adserver_scope");o&&t.set("scope",o);var i,a,c=new XMLHttpRequest;c.open("GET","".concat((i=window.location.hostname,a=i.split(".").slice(1).join("."),i.includes("mercadopago")?"https://placements.".concat(a):"https://".concat(i.replace("dev","www"))),"/adn/api?").concat(t.toString())),c.responseType="json",c.onload=function(){[200,204].includes(null==c?void 0:c.status)||r(new Error("status code ".concat(null==c?void 0:c.status," not valid"))),e(c.response)},c.onerror=function(){r(new Error("XMLHttpRequest network error"))},c.send()}))},o="/advertising/adn",i="cleanAndSend",a="success",c="error",u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;window.melidata&&window.melidata(i,"event",{path:e,event_data:t})},l=function(t){return{status:a,source:"script",params:{placement:(null==t?void 0:t.getAttribute("data-placement"))||"",page:(null==t?void 0:t.getAttribute("data-page"))||"",slot_id:(null==t?void 0:t.getAttribute("data-slot_id"))||""}}},s=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=l(t);e&&(r.status=c,r.reason=e,null==t||t.setAttribute("style","display:none")),n&&(r.status=a),u(r)};function d(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var m=function(t){try{return JSON.stringify(t)}catch(t){return JSON.stringify([])}},y=function(t){return new Promise((function(e,n){var o,i=function(t){for(var e={},n=0,r=!0;n<t.attributes.length&&r;){var o,i=null!==(o=t.attributes[n].name.replace("data-",""))&&void 0!==o?o:"";"component"!==i&&"content"!==i&&(e["".concat(i)]=t.attributes[n].value),"content"===i&&(e=JSON.parse(t.attributes[n].value).queries,r=!1),n+=1}return new URLSearchParams(e)}(t);i.set("unique_id",(o=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==t?e:3&e|8).toString(16)})))),r(i).then((function(r){if(null!=r&&r.items.length){var o=f(r.items,1)[0];e({item:o,banner:t})}else s(t,"Empty response, with params ".concat(i.toString())),n()})).catch((function(e){s(t,"fail fetching: ".concat(e.message,", with params ").concat(i.toString())),n()}))}))},b=function(){var t=document.querySelectorAll('[data-component="adn"]'),e={};t.length>0?Promise.allSettled(d(t).map(y)).then((function(t){t.forEach((function(t){if("fulfilled"===t.status){var r=t.value,o=r.item,i=o.content,a=i.actions.content_link.link,c=i.texts,u=i.images,l=i.colors,d=o.event_tracking,f=d.print,p=d.click,v=d.view,y=o.template,b=o.lazy_loading_print_percentage,h=r.banner;if(!e[y.url]){var g=y.url,w=n("template_version");w&&(g=g.replace(/\.\d{1,3}\.\d{1,3}\.\d{1,3}(-[a-z]+\.\d{1,3})?\.js/,".".concat(w,".js"))),e[y.url]=g;var x=document.createElement("script");x.src=g,document.head.appendChild(x)}var S=document.createElement("".concat(y.tag));if(Object.keys(c).forEach((function(t){return S.setAttribute(t,c[t])})),Object.keys(u).forEach((function(t){return S.setAttribute(t,u[t])})),Object.keys(l).forEach((function(t){return S.setAttribute(t,l[t])})),S.setAttribute("destination_url",a),S.setAttribute("print_url",m(f)),S.setAttribute("click_url",m(p)),v&&S.setAttribute("view_url",m(v)),b>-1&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype){var A=function(){var t=arguments.length>1?arguments[1]:void 0;return new IntersectionObserver((function(e,n){e.forEach((function(e){e.isIntersecting&&(e.target.appendChild(t),n.disconnect())}))}),{root:null,rootMargin:"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,"%")})}(b,S);A.observe(h)}else h.appendChild(S);s(h)}}))})).catch((function(){t.forEach((function(t){return s(t,"error adding banners")}))})):s(void 0,"banners not found")},h=void function(t){var e=document.createElement("script");"noModule"in e!=!1&&Promise.allSettled?t():(e.src="https://http2.mlstatic.com/frontend-assets/adn-frontend-library/adn-polyfills.js",e.defer=!0,e.onload=t,document.head.appendChild(e))}(b),g=window;for(var w in e)g[w]=e[w];e.__esModule&&Object.defineProperty(g,"__esModule",{value:!0})}();
//# sourceMappingURL=adn-script.js.map